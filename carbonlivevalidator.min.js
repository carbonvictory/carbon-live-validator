;(function(b){b.fn.liveValidate=function(c){var e=b.extend({},b.fn.liveValidate.defaultSettings,c||{});var d=new a(e,this);d.start();this.on("blur","input, textarea",function(){d.validate(this)});this.on("change","[type=checkbox], [type=radio], select",function(){d.validate(this)});if(d.settings.eagerValidateLastField){b("input[required]:not(:disabled)").last().on("keyup",function(f){if(f.which!=9){d.validateForm()}})}return this.bind("submit",function(f){f.preventDefault(f);if(d.formIsValid()){if(d.settings.disableSubmit){b("input[type=submit]").prop("disabled",true)}if(typeof(d.settings.onSubmit)==="function"){d.settings.onSubmit(this)}this.submit()}else{d.onFailedValidation()}})};b.fn.liveValidate.defaultSettings={disableSubmit:true,eagerValidateLastField:true,onInit:null,beforeFieldValidation:null,afterFieldValidation:null,beforeFormValidation:null,onSuccessfulValidation:null,onFailedValidation:null,onSubmit:null};b.fn.liveValidate.validationRules={empty:function(c){return(c.length===0)},required:function(c){return(c.length>0)},alphanumeric:function(c){return/^[\w]+$/gi.test(c)||this.empty(c)},alphabetic:function(c){return/^[A-z]+$/gi.test(c)||this.empty(c)},numeric:function(c){return/^[\d\.]+$/g.test(c)||this.empty(c)},email:function(c){return/^[\w\.\-]+\@[\w\.\-]+\.[A-z\.]{2,}$/gi.test(c)||this.empty(c)},zip:function(c){return/^\d{5}(-\d{4})?$/g.test(c)||this.empty(c)},state_usa:function(c){return/^[A-z]{2}$/g.test(c)||this.empty(c)},phone_usa:function(c){return/^(\()?\d{3}(\))?[\.\-\s]\d{3}[\.\-\s]\d{4}$/g.test(c)||this.empty(c)},date:function(c){return/^(\d{4}[\/\-]\d{1,2}[\/\-]{1,2}\d{2}|\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2}(\d{2})?)$/g.test(c)||this.empty(c)},year:function(c){return/^\d{4}$/g.test(c)||this.empty(c)},url:function(c){return/^((http|ftp|https):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?$/.test(c)||this.empty(c)},money_usa:function(c){return/^\d+\.\d{2}$/g.test(c)||this.empty(c)},money_euro:function(c){return/^\d+\,\d{2}$/g.test(c)||this.empty(c)},creditcard:function(c){return/^\d{4}[\s\-]?\d{4}[\s\-]?\d{4}[\s\-]?\d{4}$/g.test(c)||this.empty(c)},matches:function(c,d){return(c===b('[name="'+d+'"]').val())||this.empty(c)},different:function(c,d){return(c!==b('[name="'+d+'"]').val())||this.empty(c)},min:function(d,c){if(this.empty(d)){return true}if(!this.numeric(d)){return false}return parseInt(d)>=parseInt(c)},max:function(c,d){if(this.empty(c)){return true}if(!this.numeric(c)){return false}return parseInt(c)<=parseInt(d)},range:function(c,d){if(this.empty(c)){return true}if(!this.numeric(c)){return false}c=parseInt(c);d=d.split(",");d[0]=parseInt(d[0]);d[1]=parseInt(d[1]);return c>=d[0]&&c<=d[1]},between:function(c,d){if(this.empty(c)){return true}if(!this.numeric(c)){return false}c=parseInt(c);d=d.split(",");d[0]=parseInt(d[0]);d[1]=parseInt(d[1]);return c>d[0]&&c<d[1]},minlength:function(d,c){return(d.length>=c)||this.empty(d)},maxlength:function(d,c){return(d.length<=c)||this.empty(d)},list:function(d,c){return(b.inArray(d,c.split(","))>-1)||this.empty(d)},excludes:function(d,c){return(b.inArray(d,c.split(","))===-1)||this.empty(d)},accepted:function(c){return b('[value="'+c+'"]').prop("checked")},before:function(d,c){return(new Date(d).getTime()<new Date(c).getTime())||this.empty(d)},after:function(d,c){return(new Date(d).getTime()>new Date(c).getTime())||this.empty(d)}};b.fn.liveValidate.warningMessages={base:"Sorry, but there is a problem with this field.",required:"Sorry, but this field is required.",alphanumeric:"Sorry, but this field may only contain letters and numbers.",alphabetic:"Sorry, but this field may only contain letters.",numeric:"Sorry, but this field may only contain numbers.",email:"Please enter a valid email address (ex. 'mailbox@example.com').",zip:"Please enter a valid ZIP code (ex. '60614').",state_usa:"Please enter a valid state abbreviation (ex. 'IL').",date:"Please enter a valid date (ex. '1/1/2013').",year:"Please enter a valid year.",url:"Please enter a valid URL (ex. 'http://google.com').",money_usa:"Please enter a valid dollar amount (ex. '5.99').",money_euro:"Please enter a valid Euro amount (ex. '5,99').",creditcard:"Please enter a valid 16-digit credit card number.",matches:"Sorry, but this field must match {0}.",different:"Sorry, but this field must be different from {0}.",min:"Please enter a value greater than or equal to {0}.",max:"Please enter a value less than or equal to {0}.",range:"Please enter a value no less than {0} and no more than {1}.",between:"Please enter a value between {0} and {1}.",minlength:"Sorry, but this needs to be at least {0} characters long.",maxlength:"Sorry, but this must be {0} characters or less.",before:"Please choose a date before {0}.",after:"Please choose a date after {0}.",accepted:"Sorry, but you must accept these terms."};function a(c,d){this.form=d;this.form.errors={};this.fieldBeingValidated={};this.settings=c;this.validationRules=b.extend({},b.fn.liveValidate.validationRules,c.validationRules||{});this.warningMessages=b.extend({},b.fn.liveValidate.warningMessages,c.warningMessages||{});return this}a.prototype={start:function(){if(typeof(this.settings.onInit)==="function"){this.settings.onInit(this.form)}if(this.settings.disableSubmit){b(this.form).find("input[type=submit]").prop("disabled",true)}this.validateForm()},setCurrentField:function(c){this.fieldBeingValidated={id:b(c).attr("id"),name:b(c).attr("name"),value:b(c).val(),"$elem":b(c)}},unsetCurrentField:function(){this.fieldBeingValidated={}},validate:function(c){this.setCurrentField(c);if(typeof(this.settings.rules[this.fieldBeingValidated.name])==="undefined"){this.validateForm();return}this.beforeFieldValidation();var d=this.validateField();this.afterFieldValidation(d);this.unsetCurrentField(c)},validateField:function(){var c=this.settings.rules[this.fieldBeingValidated.name];switch(typeof(c)){case"function":return this.validateCustomRule(c);case"string":return this.validatePresetRule(c);default:return false}},validatePresetRule:function(g){var e=this.fieldBeingValidated.value;var f=true;var h=g.split("|");for(var c=0;c<h.length;++c){var d=this.extractRuleParam(h[c]);if(!this.validationRules[d.name](e,d.params)){f=false;this.raiseError(d)}}if(f){this.removeError()}return f},validateCustomRule:function(e){var c=this.fieldBeingValidated.value;var d=e(c);if(d){this.removeError()}else{this.raiseError(null)}return(typeof(d)==="boolean")?d:false},extractRuleParam:function(e){var d=/\(\:[\w\-\,]+\)$/gi;var c=e.match(d);return{name:e.replace(d,""),params:(c===null)?null:c[0].replace(/[^\w\-\,]/g,"")}},beforeFieldValidation:function(){if(typeof(this.settings.beforeFieldValidation)==="function"){this.settings.beforeFieldValidation(this.fieldBeingValidated.$elem)}},afterFieldValidation:function(c){if(typeof(this.settings.afterFieldValidation)==="function"){var e=this.fieldBeingValidated.id;var d=(typeof(this.form.errors[e])!=="undefined")?this.form.errors[e].message:null;this.settings.afterFieldValidation(this.fieldBeingValidated.$elem,c,d)}this.validateForm()},raiseError:function(e){var d=this.fieldBeingValidated.id;var f=this.fieldBeingValidated.name;var c=this.warningMessages.base;if(typeof(this.warningMessages[f])!=="undefined"){c=this.warningMessages[f]}else{if(e!==null){c=this.formatWarningMessage(this.warningMessages[e.name],e.params)}}this.form.errors[d]={element:this.fieldBeingValidated.$elem,message:c}},formatWarningMessage:function(d,e){if(e===null){return d}e=e.split(",");for(var c=0;c<e.length;c++){d=d.replace("{"+c+"}",e[c])}return d},removeError:function(){var c=this.fieldBeingValidated.id;if(typeof(this.form.errors[c])!=="undefined"){delete this.form.errors[c]}},validateForm:function(){this.beforeFormValidation();if(this.formIsValid()){this.onSuccessfulValidation()}else{this.onFailedValidation()}},formIsValid:function(){var c=this;var d=true;b(this.form).find("input:not(:disabled), select:not(:disabled), textarea:not(:disabled)").each(function(){c.setCurrentField(this);if(typeof(c.settings.rules[c.fieldBeingValidated.name])!=="undefined"){if(!c.validateField()){d=false}}});c.unsetCurrentField();return d},beforeFormValidation:function(){if(typeof(this.settings.beforeFormValidation)==="function"){this.settings.beforeFormValidation(this.form)}},onSuccessfulValidation:function(){if(typeof(this.settings.onSuccessfulValidation)==="function"){this.settings.onSuccessfulValidation(this.form)}if(this.settings.disableSubmit){b("input[type=submit]").prop("disabled",false)}},onFailedValidation:function(){if(typeof(this.settings.onFailedValidation)==="function"){this.settings.onFailedValidation(this.form)}if(this.settings.disableSubmit){b("input[type=submit]").prop("disabled",true)}}}})(jQuery);